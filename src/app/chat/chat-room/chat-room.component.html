<div class="chat-room">
  <!-- Messages -->
  <div class="messages">
    <div *ngIf="messages.length === 0" class="no-messages">
      No messages yet. Start the conversation!
    </div>
    <div
      *ngFor="let message of messages"
      [ngClass]="{
        'my-message': message.senderId === userId,
        'their-message': message.senderId !== userId
      }"
      class="message"
    >
      <span class="sender">{{ message.senderName }}</span>
      <span class="content">{{ message.content }}</span>
      
      <div class="message-footer">
        <span class="timestamp">{{ formatTimestamp(message.timestamp) }}</span>
        <span *ngIf="message.senderId === userId" class="status">
          <img
            [src]="getMessageStatusIcon(message.status ?? 'sent')"
            [alt]="message.status || 'Sent'"
            class="status-icon"
          />          
          {{ message.status || 'Sent' }}
        </span>
      </div>
    </div>
  </div>

  <!-- Input -->
  <div class="message-input-container">
    <app-message-input
      [chatId]="chatId"
      (messageSent)="sendMessage($event)"
    ></app-message-input>
  </div>
</div>
